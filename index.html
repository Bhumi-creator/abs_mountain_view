<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Homestay Booking with Date-based Prices</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: auto;
    padding: 20px;
  }
  h1 {
    text-align: center;
  }
  .homestay {
    border: 1px solid #ddd;
    padding: 15px;
    margin-bottom: 30px;
    border-radius: 8px;
  }
  .homestay img {
    width: 100%;
    max-width: 600px;
    border-radius: 5px;
  }
  .price-display {
    font-weight: bold;
    margin-top: 10px;
    font-size: 18px;
  }
  label {
    display: block;
    margin-top: 10px;
    margin-bottom: 5px;
  }
  input[type="date"] {
    padding: 8px;
    font-size: 16px;
  }
</style>
</head>
<body>

<h1>Homestay Booking</h1>

<div id="homestayList"></div>

<script>
  const homestays = [
    {
      name: "Hill View Villa",
      basePrice: 2000,
      image: "https://picsum.photos/id/1018/600/400"
    },
    {
      name: "Forest Nest",
      basePrice: 1800,
      image: "https://picsum.photos/id/1020/600/400"
    },
    {
      name: "Lakefront Retreat",
      basePrice: 2200,
      image: "https://picsum.photos/id/1015/600/400"
    }
  ];

  // Pricing data will be loaded from JSON
  let pricingData = {};

  // Fetch pricing JSON file
  fetch("pricing.json")
    .then(res => res.json())
    .then(data => {
      pricingData = data;
      renderHomestays();
    })
    .catch(err => {
      document.getElementById("homestayList").innerHTML = `<p style="color:red;">Error loading pricing data: ${err.message}</p>`;
      renderHomestays();  // fallback to base prices only
    });

  function renderHomestays() {
    const container = document.getElementById("homestayList");
    container.innerHTML = "";

    homestays.forEach(h => {
      const homestayDiv = document.createElement("div");
      homestayDiv.classList.add("homestay");

      homestayDiv.innerHTML = `
        <h2>${h.name}</h2>
        <img src="${h.image}" alt="${h.name}" />
        <p>Base Price: ₹${h.basePrice}</p>
        <label for="date-${h.name}">Check Price by Date:</label>
        <input type="date" id="date-${h.name}" />
        <p class="price-display" id="price-${h.name}">Select a date to see price.</p>
      `;

      container.appendChild(homestayDiv);

      // Add event listener for date input
      const dateInput = homestayDiv.querySelector(`#date-${h.name}`);
      const priceDisplay = homestayDiv.querySelector(`#price-${h.name}`);

      dateInput.addEventListener("change", () => {
        const selectedDate = dateInput.value;

        if (pricingData[selectedDate] && pricingData[selectedDate][h.name]) {
          priceDisplay.textContent = `Price on ${selectedDate}: ₹${pricingData[selectedDate][h.name]}`;
        } else if (selectedDate) {
          priceDisplay.textContent = `No pricing data for ${selectedDate}, showing base price: ₹${h.basePrice}`;
        } else {
          priceDisplay.textContent = "Select a date to see price.";
        }
      });
    });
  }
</script>

</body>
</html>
